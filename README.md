üöó Real-time LPR System (IoT + Cloud)
‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå Ultrasonic ‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏õ‡∏£‡∏∞‡∏ä‡∏¥‡∏î ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ú‡πà‡∏≤‡∏ô iApp API ‡∏ö‡∏ô Cloud Server

üìç 1. ‡∏ù‡∏±‡πà‡∏á Raspberry Pi (Edge Device)
‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏, ‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á, ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÑ‡∏ü LED ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏†‡∏≤‡∏û‡πÑ‡∏õ‡∏¢‡∏±‡∏á Server

üìÅ ‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å: Cam_Pi.py

Logic ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:

‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞ < 15 cm (‡∏õ‡∏£‡∏±‡∏ö‡∏à‡∏π‡∏ô‡∏ú‡πà‡∏≤‡∏ô MAX_DISTANCE).

‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö Hysteresis (Clear ‡∏ó‡∏µ‡πà 25 cm) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏£‡∏ö‡∏Å‡∏ß‡∏ô.

‡∏™‡πà‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ 1 ‡πÑ‡∏õ‡∏¢‡∏±‡∏á PocketBase ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡∏≠‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏ ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á 0 ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ.

‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î 1280x720 ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á API Server.

üõ† ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á (Setup):

‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏¢ (Wiring):

TRIG: GPIO 22 | ECHO: GPIO 27

LED Detection: GPIO 23 (‡∏™‡∏µ‡πÅ‡∏î‡∏á)

LED Success: GPIO 25 (‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß)

‡∏™‡∏£‡πâ‡∏≤‡∏á Environment:

Bash
python3 -m venv venv
source venv/bin/activate
pip install requests RPi.GPIO
‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (Autostart):

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå /etc/systemd/system/cam_pi.service

‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô User=thiraphatchakon ‡πÅ‡∏•‡∏∞ Path ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á.

‡∏™‡∏±‡πà‡∏á‡∏Å‡∏≤‡∏£: sudo systemctl enable --now cam_pi.service

‚òÅÔ∏è 2. ‡∏ù‡∏±‡πà‡∏á Cloud Server (Docker & API)
‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å Pi, ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ iApp LPR API ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á Database

üìÅ ‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å: Model.py (Inside Docker)

Endpoint: POST /backend/api/detections?image

API Integration: * ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ iApp LPR V3 (‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ 0.75 IC/Request).

‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Error 402 (Insufficient Credits) ‡πÅ‡∏•‡∏∞ 415 (Format Error).

Database: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏•‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Backend.

üê≥ ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Docker (Commands):

‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Container:

Bash
docker ps
‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏Ñ‡πâ‡∏î‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï API Key:

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå Model.py ‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å.

‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤ Container:
docker cp Model.py lpr_system:/app/Model.py

‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó: docker restart lpr_system

‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Log ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Debug (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç):

Bash
docker logs -f lpr_system
üß™ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö (Testing)
‡∏ó‡∏î‡∏™‡∏≠‡∏ö HW: ‡∏ô‡∏≥‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏°‡∏≤‡∏ö‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞ 10 cm -> ‡πÑ‡∏ü‡πÅ‡∏î‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î -> ‡∏£‡∏≠ 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ -> ‡πÑ‡∏ü‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö (‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à).

‡∏ó‡∏î‡∏™‡∏≠‡∏ö API: * ‡πÉ‡∏ä‡πâ Postman ‡∏™‡πà‡∏á‡πÅ‡∏ö‡∏ö form-data.

Key: image (‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó File).

URL: http://159.223.40.63:5000/backend/api/detections?image.
